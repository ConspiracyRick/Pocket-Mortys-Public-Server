RewriteEngine On

# Disable Apache's automatic slash redirect for this path
DirectorySlash Off

RewriteCond %{HTTP:X-Forwarded-Proto} =https
RewriteRule ^(.*)$ http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# Internally rewrite /is-gdpr to /is-gdpr/
RewriteCond %{REQUEST_URI} ^/is-gdpr$
RewriteRule ^is-gdpr$ /is-gdpr/ [L]

# Internally rewrite /inappdeletion/get-account-data-storage-time to /inappdeletion/get-account-data-storage-time/
RewriteCond %{REQUEST_URI} ^/inappdeletion/get-account-data-storage-time$
RewriteRule ^inappdeletion/get-account-data-storage-time$ /inappdeletion/get-account-data-storage-time/ [L]

# Internally rewrite /iap/display/list to /iap/display/list/
RewriteCond %{REQUEST_URI} ^/iap/display/list$
RewriteRule ^iap/display/list$ /iap/display/list/ [L]

# Internally rewrite /user/register to /user/register/
RewriteCond %{REQUEST_URI} ^/user/register$
RewriteRule ^user/register$ /user/register/ [L]

# Internally rewrite /user/login to /user/login/
RewriteCond %{REQUEST_URI} ^/user/login$
RewriteRule ^user/login$ /user/login/ [L]

# Internally rewrite /sse to /sse/
RewriteCond %{REQUEST_URI} ^/sse$
RewriteRule ^sse$ /sse/ [L]

# Internally rewrite /session/ping-dynamic to /session/ping-dynamic/
RewriteCond %{REQUEST_URI} ^/session/ping-dynamic$
RewriteRule ^session/ping-dynamic$ /session/ping-dynamic/ [L]

# Internally rewrite /decks/slots/config to /decks/slots/config/
RewriteCond %{REQUEST_URI} ^/decks/slots/config$
RewriteRule ^decks/slots/config$ /decks/slots/config/ [L]

# Internally rewrite /morty/slots/config to /morty/slots/config/
RewriteCond %{REQUEST_URI} ^/morty/slots/config$
RewriteRule ^morty/slots/config$ /morty/slots/config/ [L]

# Internally rewrite /trading/config to /trading/config/
RewriteCond %{REQUEST_URI} ^/trading/config$
RewriteRule ^trading/config$ /trading/config/ [L]

# Internally rewrite /session/player-details to /session/player-details/
RewriteCond %{REQUEST_URI} ^/session/player-details$
RewriteRule ^session/player-details$ /session/player-details/ [L]

# Internally rewrite /session/player-avatar/migrate to /session/player-avatar/migrate/
RewriteCond %{REQUEST_URI} ^/session/player-avatar/migrate$
RewriteRule ^session/player-avatar/migrate$ /session/player-avatar/migrate/ [L]

# Internally rewrite /session/friend/list to /session/friend/list/
RewriteCond %{REQUEST_URI} ^/session/friend/list$
RewriteRule ^session/friend/list$ /session/friend/list/ [L]

# Internally rewrite /session/dimensions/query to /session/dimensions/query/
RewriteCond %{REQUEST_URI} ^/session/dimensions/query$
RewriteRule ^session/dimensions/query$ /session/dimensions/query/ [L]

# Internally rewrite /session/join-room to /session/join-room/
RewriteCond %{REQUEST_URI} ^/session/join-room$
RewriteRule ^session/join-room$ /session/join-room/ [L]

# Internally rewrite /session/leave-room to /session/leave-room/
RewriteCond %{REQUEST_URI} ^/session/leave-room$
RewriteRule ^session/leave-room$ /session/leave-room/ [L]

# Internally rewrite /session/state to /session/state/
RewriteCond %{REQUEST_URI} ^/session/state$
RewriteRule ^session/state$ /session/state/ [L]

# Internally rewrite /session/battle-bot to /session/battle-bot/
RewriteCond %{REQUEST_URI} ^/session/battle-bot$
RewriteRule ^session/battle-bot$ /session/battle-bot/ [L]

# Internally rewrite /session/battle/ready to /session/battle/ready/
RewriteCond %{REQUEST_URI} ^/session/battle/ready$
RewriteRule ^session/battle/ready$ /session/battle/ready/ [L]

<Files "manifest.json">
    ForceType application/octet-stream
    Header set Content-Disposition "attachment; filename=manifest.json"
</Files>